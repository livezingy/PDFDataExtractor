# Streamlit用户使用指南

## 概述

本文档详细介绍如何使用Streamlit Web界面进行PDF和图像表格提取。

## 界面介绍

### 主界面布局

- **左侧边栏**：文件上传、方法选择、参数配置
- **主区域**：文件信息、处理结果、表格显示

### 侧边栏功能

1. **文件上传**：支持PDF和图像文件
2. **提取配置**：选择提取方法和参数
3. **依赖状态**：显示各引擎的可用状态
4. **项目信息**：GitHub链接和版本信息

## PDF文件处理

### 1. 文件上传

- 支持格式：`.pdf`
- 文件大小限制：10MB（测试版本）
- 上传方式：点击"Select PDF or Image File"按钮

### 2. 选择提取方法

#### PDFPlumber（推荐用于无框表格）

- **auto**：自动选择最佳模式
- **lines**：适合有边框的表格
- **text**：适合无边框的表格

**使用场景**：
- 无框表格
- 文本对齐的表格
- 简单表格结构

#### Camelot（推荐用于有框表格）

- **auto**：自动选择最佳模式
- **lattice**：适合有完整边框的表格
- **stream**：适合有部分边框的表格

**使用场景**：
- 有框表格
- 复杂表格结构
- 多表格页面

### 3. 参数配置

#### 自动参数模式（推荐）

- 系统根据页面特征自动计算最优参数
- 适合大多数情况

#### 手动参数模式

可以手动调整以下参数：

**PDFPlumber参数**：
- `snap_tolerance`：对齐容差
- `min_words_vertical`：最小垂直词数
- `text_x_tolerance`：文本X方向容差

**Camelot参数**：
- `line_scale`：线条缩放
- `row_tol`：行容差
- `edge_tol`：边缘容差

### 4. 开始处理

点击"🚀 Start Extraction"按钮开始处理。

### 5. 查看结果

- **检测步骤**：显示处理过程
- **提取的表格**：显示所有检测到的表格
- **表格数据**：以DataFrame格式显示
- **表格信息**：显示位置、置信度等

## 图像文件处理

### 1. 文件上传

- 支持格式：`.png`, `.jpg`, `.jpeg`, `.bmp`, `.tif`, `.tiff`
- 文件大小限制：10MB（测试版本）

### 2. 选择检测引擎

**⚠️ 重要提示**：**图像表格检测功能（PaddleOCR+PP-Structure / Transformer）在 Streamlit Cloud 上不可用**，需要在本地或服务器部署。

#### PaddleOCR+PP-Structure ✅

**优势**（本地/服务器部署）：
- ✅ 优秀的中文识别能力
- ✅ 处理速度快
- ✅ 支持表格检测和结构识别
- ✅ 支持HTML格式输出

**限制**：
- ❌ **Streamlit Cloud不可用**（模型过大，200-500MB+，会频繁超时）
- ⚠️ 需要在本地或服务器部署
- ⚠️ 首次使用需要下载大模型（2-5分钟）

**适用场景**（本地/服务器）：
- 中文文档
- 需要快速处理
- 标准表格结构

#### Transformer ⚠️

**优势**（本地/服务器部署）：
- ✅ 高精度表格检测
- ✅ 复杂表格结构识别
- ✅ 英文文档识别准确

**限制**：
- ❌ **Streamlit Cloud不可用**（资源限制）
- ⚠️ 需要在本地或服务器部署
- ⚠️ 需要较大内存和模型文件

**适用场景**（本地/服务器）：
- 复杂表格结构
- 英文文档
- 需要高精度识别

### 3. 开始处理

点击"🚀 Start Extraction"按钮开始处理。

**处理流程**：
1. 初始化引擎
2. 检测表格区域
3. 识别表格结构
4. 解析为DataFrame格式

### 4. 查看结果

- **检测步骤**：显示处理进度
- **表格列表**：显示所有检测到的表格
- **表格数据**：显示解析后的表格内容
- **结构信息**：显示表格的行列结构

## 结果导出

### 查看表格数据

- 每个表格以DataFrame格式显示
- 可以查看表格的行列数
- 显示表格的置信度分数

### 导出功能（计划中）

- CSV导出
- Excel导出
- JSON导出

## 使用技巧

### 1. 选择合适的提取方法

**判断表格类型**：
- 有完整边框 → Camelot (lattice)
- 有部分边框 → Camelot (stream)
- 无边框 → PDFPlumber (text)
- 不确定 → 使用 auto 模式

### 2. 参数优化

**如果提取结果不理想**：
1. 尝试切换提取方法
2. 尝试不同的Flavor
3. 调整参数（如果使用手动模式）
4. 检查PDF文件质量

### 3. 性能优化

**提高处理速度**：
- 使用PDFPlumber（通常比Camelot快）
- 对于图像文件，使用PaddleOCR（比Transformer快）
- 如果可用，启用GPU加速

**减少内存占用**：
- 处理较小的文件
- 一次处理一页
- 关闭不需要的引擎

## 常见问题

### Q1: 为什么某些引擎显示不可用？

**原因**：
- 依赖未安装
- 模型文件缺失
- 环境配置问题

**解决方案**：
- 检查依赖安装：`pip install -r requirements.txt`
- 查看依赖状态（在侧边栏）
- 参考 [FAQ](FAQ.md) 获取详细帮助

### Q2: 处理时间很长怎么办？

**可能原因**：
- 文件较大
- 使用Transformer引擎（较慢）
- 首次使用需要下载模型

**优化建议**：
- 使用较小的测试文件
- 对于图像文件，优先使用PaddleOCR
- 等待首次模型下载完成

### Q3: 提取结果不准确？

**可能原因**：
- 表格类型判断错误
- 参数设置不当
- PDF质量较差

**解决方案**：
1. 尝试不同的提取方法
2. 调整参数设置
3. 检查PDF文件质量
4. 参考 [表格类型判断指南](table_type_judgment_guide.md)

### Q4: 如何选择最佳方法？

**建议流程**：
1. 首先尝试 auto 模式
2. 如果结果不理想，根据表格类型手动选择
3. 参考 [表格类型判断指南](table_type_judgment_guide.md)

## 高级功能

### 批量处理（计划中）

- 支持多文件上传
- 批量处理多个PDF
- 结果汇总导出

### 自定义参数（计划中）

- 保存常用参数配置
- 参数模板管理
- 参数导入导出

## 获取帮助

- 查看 [常见问题FAQ](FAQ.md)
- 阅读 [技术原理文档](../README.md#-技术原理文档)
- 提交 [GitHub Issue](https://github.com/livezingy/PDFDataExtractor/issues)

---

**提示**：如果遇到问题，请先查看侧边栏的"依赖状态"，确保所需引擎已正确安装。
